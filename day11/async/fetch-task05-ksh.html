<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="result"></div>
</body>
<script>
  // https://jsonplaceholder.typicode.com/todos
  // todos의 데이터 중 완료되지 않은 것 중
  // title에 "q" 또는 "p"가 들어간 타이틀을 조회. 해당 타이틀 뒤에서 5번째 글자를 가져오기
  // 글자 중 가장 많은 알파벳을 result에 출력하기
  const result = document.querySelector("#result")
  const getTodos = async () => {
    const response = await fetch("https://jsonplaceholder.typicode.com/todos")
    const todos = await response.json()
    const completedTodos = todos.filter((todo) => !todo.completed)
    const titles = completedTodos.map((todo) => todo.title)
    const titlespq = titles.filter((title) => title.includes("p") || title.includes("q"))
    const arr = titlespq.map((title) => title.replaceAll(" ", "").split("").slice(-5, -4)[0])
    
    const count = {}
    arr.forEach((c) => {
      count[c] = (count[c] || 0) + 1
    })

    let maxCount = 0;
    let maxChar = ""

    for(let key in count){
      if(count[key] > maxCount){
        maxCount = count[key]
        maxChar = key
      }
    }

  result.innerHTML = `
    <p>가장 많은 문자: ${maxChar}</p>
    <p>가장 많은 문자의 횟수: ${maxCount}</p>
  `
  }

  getTodos()
</script>
</html>